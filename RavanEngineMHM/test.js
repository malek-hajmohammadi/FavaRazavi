{"lable":"\u062a\u0628\u062f\u064a\u0644 \u0648\u0636\u0639 \u0627\u0633\u062a\u062e\u062f\u0627\u0645\u064a","tip":"","cssClass":"","showSub":false,"showNote":false,"showRegCode":false,"icon":false,"SecID":1,"storageEng":"InnoDB","addrow":0,"editrow":0,"deleterow":0,"events":{"load":{"name":"NField:load","act":"listener = function(event){\n\t\n}"},"beforeSave":{"name":"NField:bsave","act":"listener = function(event) {\n  class mainClass {\n    setTotalScore() {\n      let total = 0;\n      let mafoq = parseInt(FormView.myForm.getItemByName('Field_29').getData());\n      if (isNaN(mafoq)) mafoq = 0;\n      let ejraee = parseInt(FormView.myForm.getItemByName('Field_34').getData());\n      if (isNaN(ejraee)) ejraee = 0;\n      let nemoone = parseInt(FormView.myForm.getItemByName('Field_36').getData());\n      if (isNaN(nemoone)) nemoone = 0;\n      let sesal = parseInt(FormView.myForm.getItemByName('Field_44').getData());\n      if (isNaN(sesal)) sesal = 0;\n      total = mafoq + ejraee + nemoone + sesal;\n      FormView.myForm.getItemByName('Field_45').setData(total);\n    }\n    setReadOnly() {\n      $jq('.mafoq \u003Einput').attr(\"readonly\", \"true\");\n      $jq('.mafoq \u003Einput').css(\"background\", \"gainsboro\");\n      $jq('.ejraee \u003Einput').attr(\"readonly\", \"true\");\n      $jq('.ejraee \u003Einput').css(\"background\", \"gainsboro\");\n      $jq('.nemoone \u003Einput').attr(\"readonly\", \"true\");\n      $jq('.nemoone \u003Einput').css(\"background\", \"gainsboro\");\n      $jq('.sesal \u003Einput').attr(\"readonly\", \"true\");\n      $jq('.sesal \u003Einput').css(\"background\", \"gainsboro\");\n      $jq('.totalScore \u003Einput').attr(\"readonly\", \"true\");\n      $jq('.totalScore \u003Einput').css(\"background\", \"gainsboro\");\n    }\n    setSumMafoq() {\n      let total = 0;\n      let a = FormView.myForm.getItemByName('Field_10').getData();\n      if (a == \"\") a = 0;\n      let b = FormView.myForm.getItemByName('Field_11').getData();\n      if (b == \"\") b = 0;\n      let c = FormView.myForm.getItemByName('Field_12').getData();\n      if (c == \"\") c = 0;\n      let d = FormView.myForm.getItemByName('Field_13').getData();\n      if (d == \"\") d = 0;\n      let e = FormView.myForm.getItemByName('Field_14').getData();\n      if (e == \"\") e = 0;\n      total = a + b + c + d + e ;\n      FormView.myForm.getItemByName('Field_15').setData(total);\n    }\n    setSumBelafasl() {\n      let total = 0;\n      let a = FormView.myForm.getItemByName('Field_16').getData();\n      if (a == \"\") a = 0;\n      let b = FormView.myForm.getItemByName('Field_17').getData();\n      if (b == \"\") b = 0;\n      let c = FormView.myForm.getItemByName('Field_18').getData();\n      if (c == \"\") c = 0;\n      let d = FormView.myForm.getItemByName('Field_19').getData();\n      if (d == \"\") d = 0;\n      let e = FormView.myForm.getItemByName('Field_20').getData();\n      if (e == \"\") e = 0;\n      total = a + b + c + d + e ;\n      FormView.myForm.getItemByName('Field_21').setData(total);\n    }\n    setSumMostaqeem() {\n      let total = 0;\n      let a = FormView.myForm.getItemByName('Field_22').getData();\n      if (a == \"\") a = 0;\n      let b = FormView.myForm.getItemByName('Field_23').getData();\n      if (b == \"\") b = 0;\n      let c = FormView.myForm.getItemByName('Field_24').getData();\n      if (c == \"\") c = 0;\n      let d = FormView.myForm.getItemByName('Field_25').getData();\n      if (d == \"\") d = 0;\n      let e = FormView.myForm.getItemByName('Field_26').getData();\n      if (e == \"\") e = 0;\n      total = a + b + c + d + e ;\n      FormView.myForm.getItemByName('Field_27').setData(total);\n    }\n    setAvgMafoq() {\n      let total = 0;\n      let i = 3;\n      let a = FormView.myForm.getItemByName('Field_15').getData();\n      if (a == \"\") a = 0;\n      let b = FormView.myForm.getItemByName('Field_21').getData();\n      if (b == \"\") b = 0;\n      let c = FormView.myForm.getItemByName('Field_27').getData();\n      if (c == \"\") c = 0;\n      total = a + b + c ;\n         let topchrt = FormView.myForm.getItemByName('Field_7').getData();\n      if (typeof topchrt === \"undefined\") i = 2;\n         total = total \/ i ;\n      FormView.myForm.getItemByName('Field_28').setData(total);\n    }\n    setAvgSesal() {\n      let total = 0;\n      let a = FormView.myForm.getItemByName('Field_38').getData();\n      if (a == \"\") a = 0;\n      let b = FormView.myForm.getItemByName('Field_40').getData();\n      if (b == \"\") b = 0;\n      let c = FormView.myForm.getItemByName('Field_42').getData();\n      if (c == \"\") c = 0;\n      total = a + b + c ;\n      total = total \/ 6 ;\n      FormView.myForm.getItemByName('Field_43').setData(total);\n    }\n    setSums() {\n      this.setSumMafoq();\n      this.setSumBelafasl();\n      this.setSumMostaqeem();\n      this.setAvgMafoq();\n      this.setAvgSesal();\n    }\n    loadForm() {\n      this.setStageAppearance();\n      this.setSums();\n      this.setReadOnly();\n      this.setIntervalForCompletedField();\n    }\n    setIntervalForCompletedField() {\n      let that = this;\n      setInterval(function() {\n        $jq(\"div[iamfowner$='0']\").parent().css('overflow', 'visible');\n      }, 1000);\n    }\n    checkScoreLimitation() {\n      let sumTopMafoq = FormView.myForm.getItemByName('Field_29').getData();\n      if (sumTopMafoq \u003E 35) {\n        Utils.showModalMessage('\u0627\u0645\u062a\u064a\u0627\u0632 \u0627\u0632 \u0633\u0642\u0641 \u0645\u062c\u0627\u0632 \u0628\u064a\u0634\u062a\u0631 \u0627\u0633\u062a');\n        return false;\n      }\n      let sumTopEjraee = FormView.myForm.getItemByName('Field_34').getData();\n      if (sumTopEjraee \u003E 9) {\n        Utils.showModalMessage('\u0627\u0645\u062a\u064a\u0627\u0632 \u0627\u0632 \u0633\u0642\u0641 \u0645\u062c\u0627\u0632 \u0628\u064a\u0634\u062a\u0631 \u0627\u0633\u062a');\n        return false;\n      }\n      let sumTopNemoone = FormView.myForm.getItemByName('Field_36').getData();\n      if (sumTopNemoone \u003E 6) {\n        Utils.showModalMessage('\u0627\u0645\u062a\u064a\u0627\u0632 \u0627\u0632 \u0633\u0642\u0641 \u0645\u062c\u0627\u0632 \u0628\u064a\u0634\u062a\u0631 \u0627\u0633\u062a');\n        return false;\n      }\n      let sumTopSesal = FormView.myForm.getItemByName('Field_44').getData();\n      if (sumTopSesal \u003E 50) {\n        Utils.showModalMessage('\u0627\u0645\u062a\u064a\u0627\u0632 \u0627\u0632 \u0633\u0642\u0641 \u0645\u062c\u0627\u0632 \u0628\u064a\u0634\u062a\u0631 \u0627\u0633\u062a');\n        return false;\n      }\n      return true;\n    }\n    setStageAppearance() {\n      let stageNumber = FormView.myForm.getItemByName('Field_47').getData();\n      this.hiddenAllFieldset();\n      switch (stageNumber) {\n        case \"0\":\n          this.showFieldset(0);\n          break;\n        case \"1\":\n          this.showFieldset(1);\n          break;\n        case \"2\":\n          this.showFieldset(2);\n          break;\n        case \"3\":\n          this.showFieldset(3);\n          break;\n        case \"4\":\n          this.showFieldset(1);\n          this.showFieldset(2);\n          this.showFieldset(3);\n          this.showFieldset(4);\n          break;\n        }\n    }\n    hiddenAllFieldset() {\n      $jq(\".fieldSet0\").css(\"display\", \"none\");\n      $jq(\".fieldSet1\").css(\"display\", \"none\");\n      $jq(\".fieldSet2\").css(\"display\", \"none\");\n      $jq(\".fieldSet3\").css(\"display\", \"none\");\n      $jq(\".fieldSet4\").css(\"display\", \"none\");\n    }\n    showFieldset(stage) {\n      $jq(\".fieldSet\" + stage).css(\"display\", \"\");\n    }\n  };\n  var waitInterval = setInterval(function() {\n    if (FormView && FormView.myForm) {\n      let instance = new mainClass();\n      window.codeSet = instance;\n      window.codeSet.loadForm();\n    }\n    clearInterval(waitInterval);\n  }, 300);\n};\n"}}}